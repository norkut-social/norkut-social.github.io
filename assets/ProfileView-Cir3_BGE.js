import{d as b,e as $,o as a,c as r,b as t,F as N,f as T,g as p,t as y,h,u as v,i as D,j as F,k as c,l as x,w as V,m as C,n as H,p as B}from"./index-CL40LWZQ.js";import{u as k,_ as I}from"./Profile.vue_vue_type_script_setup_true_lang-C2jIeoWN.js";import{_ as L}from"./ProfileInfo.vue_vue_type_script_setup_true_lang-BFvDH1rZ.js";import{_ as P}from"./Followings.vue_vue_type_script_setup_true_lang-CUQkYmo4.js";import{_ as R}from"./Followers.vue_vue_type_script_setup_true_lang-DOAGsP9g.js";import{u as U}from"./Ndk-DC06sGGr.js";const A={class:"feed"},E={class:"feed__body"},Y={key:0,class:"feed-media"},j=["src"],W={class:"feed-media__body"},q={class:"feed-media__body-head"},z=["href"],G=["innerHTML"],J={key:1,class:"feed-media"},K=b({__name:"Feed",props:["npub"],setup(g){const i=g;let u={},_=$(()=>(i.npub?u=k():u=v(),u));function n(f){const d=new Date(f*1e3),e=new Date,l=s=>{const o=s.getHours().toString().padStart(2,"0"),m=s.getMinutes().toString().padStart(2,"0");return`${o}:${m}`},w=s=>s.toDateString()===e.toDateString(),S=s=>w(s)?`Today, ${l(s)}`:`${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][s.getDay()]} ${l(s)}`,M=s=>{const o=Math.floor((e-s)/864e5),m=Math.floor((e-s)/(1e3*60*60));return m<1?"less than an hour ago":m<24?`${m} hours ago`:o===1?"Yesterday":o<7?`${o} days ago`:o<30?`${Math.floor(o/7)} weeks ago`:o<365?`${Math.floor(o/30)} months ago`:`${Math.floor(o/365)} years ago`};return`${S(d)}, ${M(d)}`}return(f,d)=>(a(),r("div",A,[d[0]||(d[0]=t("header",{class:"feed__head"},[t("h2",{class:"feed__title"},"Publicações")],-1)),t("div",E,[(a(!0),r(N,null,T(p(_).feed,(e,l)=>(a(),r("div",{key:l,class:"feed-item"},[e.kind===1?(a(),r("div",Y,[t("img",{src:p(_).picture,alt:"",class:"feed-media__img circle"},null,8,j),t("div",W,[t("header",q,[t("h3",null,y(p(_).name),1),t("p",null,[t("a",{href:"/note/"+e.id,class:"link"},y(n(e.created_at)),9,z)])]),e.content?(a(),r("div",{key:0,innerHTML:e.content},null,8,G)):h("",!0)])])):h("",!0),e.kind===6?(a(),r("div",J)):h("",!0)]))),128))])]))}}),O={class:"main"},Q={class:"container"},X={key:0,class:"row"},Z={class:"col col-3"},ee={class:"col col-6"},te={class:"col col-3"},se={key:1},le=b({__name:"ProfileView",setup(g){const i=U(),u=v(),_=C(),n=$(()=>_.params.npub);async function f(){if(i.resetExplicitRelays(),await i.initNdk(),n.value){const d={npub:n.value},e=k();await e.fetchProfile(d,i.ndk),e.fetchFollowings(e,i.ndk),e.fetchFollowers(e,i.ndk),e.fetchFeed(e,i.ndk)}else v()}return D(()=>{f()}),F(async()=>{f()}),(d,e)=>{const l=H("router-link");return a(),r("div",O,[t("div",Q,[p(u).signedIn?(a(),r("div",X,[t("div",Z,[c(I,{npub:n.value},null,8,["npub"])]),t("div",ee,[c(L,{npub:n.value},null,8,["npub"]),c(K,{npub:n.value},null,8,["npub"])]),t("div",te,[c(P,{npub:n.value,type:"short"},null,8,["npub"]),c(R,{npub:n.value,type:"short"},null,8,["npub"]),e[0]||(e[0]=x('<div class="communities card"><header class="followers-head"><h2 class="followers-head__title">Comunidades ()</h2><a href="/communities/" class="followers-head__more">Ver todos</a></header><div class="followers-body"><div class="row"></div></div></div>',1))])])):(a(),r("div",se,[c(l,{to:"/login",class:"block text-purple-500 mt-6 p-2 mx-auto bg-purple-100 hover:bg-purple-200"},{default:V(()=>e[1]||(e[1]=[B(" You need to login first ")])),_:1})]))])])}}});export{le as default};
